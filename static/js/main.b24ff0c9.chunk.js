(this.webpackJsonpcatreact=this.webpackJsonpcatreact||[]).push([[0],{119:function(n,t,e){},120:function(n,t,e){},121:function(n,t,e){"use strict";e.r(t);var r=e(2),a=e.n(r),c=e(45),o=e.n(c),i=e(7),u=e(15),l=e(24),s=e(25),d=function(n){Object(l.a)(e,n);var t=Object(s.a)(e);function e(n){var r;return Object(i.a)(this,e),(r=t.call(this,n)).state={hasError:!1},r}return Object(u.a)(e,[{key:"componentDidCatch",value:function(n,t){}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(n){return{hasError:!0}}}]),e}(a.a.Component),p=e(19),f=e(20),b=e(4),m=e.n(b),v=e(8),h=e(70),g=new h.a("catreact-lkwiu");function j(){return O.apply(this,arguments)}function O(){return(O=Object(v.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(g.currentUser){n.next=5;break}return n.next=3,g.logIn(h.b.anonymous());case 3:n.next=7;break;case 5:return n.next=7,g.currentUser.refreshCustomData();case 7:return n.abrupt("return",g.currentUser.accessToken);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var x=new f.ApolloClient({link:new f.HttpLink({uri:"https://realm.mongodb.com/api/client/v2.0/app/".concat("catreact-lkwiu","/graphql"),fetch:function(n){function t(t,e){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(){var n=Object(v.a)(m.a.mark((function n(t,e){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j();case 2:return r=n.sent,e.headers.Authorization="Bearer ".concat(r),n.abrupt("return",fetch(t,e));case 5:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}),cache:new f.InMemoryCache({typePolicies:{Cards:{keyFields:["_id","url","points"]}}})}),w=e(6),k=e(18),E=e(37),y=e(125),C=e(126),_=e(124),H=e(26);function D(){var n=Object(k.a)(["\n\t\t","\n\t"]);return D=function(){return n},n}function q(){var n=Object(k.a)([""]);return q=function(){return n},n}function S(){var n=Object(k.a)([""]);return S=function(){return n},n}function $(){var n=Object(k.a)(["\n    max-width: 10em;\n    overflow: hidden;\n"]);return $=function(){return n},n}function F(){var n=Object(k.a)(["\n    width: 100%;\n    margin: 0 0 20px 0;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 27px;\n    background: #c66df9;\n    color: #ffffff;\n    border-radius: 4px;\n    text-align: center;\n    box-sizing:border-box;\n    \n    :hover {\n        color: #c66df9;\n        background: #ffffff;\n    }\n"]);return F=function(){return n},n}function I(){var n=Object(k.a)(["\n    float: right;\n"]);return I=function(){return n},n}function A(){var n=Object(k.a)(["\n    float: left;\n"]);return A=function(){return n},n}function z(){var n=Object(k.a)(["\n    height:52px;\n    width: 60px;\n    padding: 0;\n"]);return z=function(){return n},n}function U(){var n=Object(k.a)(["\n    cursor: pointer;\n    padding: 15px 20px 15px 20px;\n    margin-top: -12px;\n    background: none;\n    border: none;\n    border-radius: none;\n\n    & img {\n        width: 100%;\n        height: auto;\n        border-radius: none;\n    }\n"]);return U=function(){return n},n}function B(){var n=Object(k.a)(["\n    padding: 15px;\n    display: flex;\n    flex-flow: row;\n    justify-content: space-between;\n"]);return B=function(){return n},n}function P(){var n=Object(k.a)(["\n\tpadding: 15px;\n\tmargin-bottom: 30px;\n\tbackground: #3b3e45;\n\tborder-radius: 4px;\n\tbox-shadow: 0px 3px 7px #202225;\n"]);return P=function(){return n},n}function M(){var n=Object(k.a)(["\n\twidth: 100%\n\theight: auto;\n\ttext-align: center;\n    color: #c66df9;\n    \n    & a {\n        color: white;\n    }\n"]);return M=function(){return n},n}function R(){var n=Object(k.a)(["\n    #mobile {\n        display: none;\n    }\n\n    #desktop {\n        display: block;\n    }\n\n    @media(max-width:680px) {\n        #mobile {\n            display: block;\n        }\n\n        #desktop {\n            display: none;\n        }\n    }\n\n    padding: 10px;\n\n    & img {\n        border:0px;\n        width: 100%;\n        height: auto;\n        margin: 0 0 10px 0;\n        box-sizing: border-box;\n    }\n"]);return R=function(){return n},n}function W(){var n=Object(k.a)(["\n    width: 100%;\n    max-width: 800px;\n    height: auto;\n    margin: 0 auto;\n    background: #2f3136;\n    box-sizing: border-box;\n\n    padding: 30px 50px 30px 50px;\n\n    @media(max-width:680px;) {\n\t    padding: 30px 25px 30px 25px;\n    }\n\n    img {\n        border: 0px;\n        width: 100%;\n        height: auto;\n        margin: 0 0 10px 0;\n        padding: 0;\n    }\n"]);return W=function(){return n},n}var L=H.a.main(W()),T=H.a.header(R()),J=H.a.footer(M()),Q=H.a.div(P()),Y=H.a.div(B()),G=H.a.button(U()),K=H.a.button(z()),N=H.a.button(A()),V=H.a.button(I()),X=H.a.button(F()),Z=H.a.div($()),nn=Object(H.a)(H.a.div(q()))(S()),tn=function(n){var t=n.children,e=Object(E.a)(n,["children"]);return a.a.createElement(nn,e,t)},en=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var r=Object(y.a)(C.a,Object(_.a)("rules"),Object(_.a)("componentStyle"))(t);return H.a.div(D(),r)};tn.Wrapper=L,tn.Header=T,tn.Footer=J,tn.Card=Q,tn.Controls=Y,tn.Button=G,tn.FetchCat=en(G,X),tn.Upvote=en(G,K,N),tn.Downvote=en(G,K,V),tn.Points=Z;var rn=tn,an=e(5),cn=Object(p.b)({key:"cards",default:[]}),on=Object(p.c)({key:"card",default:{id:"",url:"",points:0,vote:0}}),un=Object(p.b)({key:"selectedCardId",default:null}),ln=(Object(p.d)({key:"selectedCard",get:function(n){var t=n.get,e=t(un);if(null!=e)return t(on(e))},set:function(n,t){var e=n.set,r=(0,n.get)(un);null!=r&&e(on(r),t)}}),function(n){var t=n.url;return a.a.createElement("img",{src:t,alt:""})}),sn=function(n){return a.a.createElement("div",{onClick:function(){n.onHandleClick()}},n.value)},dn=function(n){Object(l.a)(e,n);var t=Object(s.a)(e);function e(){var n;Object(i.a)(this,e);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=t.call.apply(t,[this].concat(a))).state={active:!1,icon:""},n}return Object(u.a)(e,[{key:"render",value:function(){return a.a.createElement(rn.Upvote,null,a.a.createElement(sn,{onHandleClick:this.props.onHandleClick,value:a.a.createElement("img",{src:"".concat("/CatReact","/images/upvote-claw.png"),alt:""})}))}}]),e}(r.Component),pn=function(n){return a.a.createElement(rn.Downvote,null,a.a.createElement(sn,{onHandleClick:n.onHandleClick,value:a.a.createElement("img",{src:"".concat("/CatReact","/images/downvote-claw.png"),alt:""})}))},fn=e(94),bn=e.n(fn),mn=function(n){var t=n.id,e=Object(p.f)(on(t)),r={color:["#f10033","#fff","#28c120"][e.vote+1]};return a.a.createElement(rn.Points,null,a.a.createElement(bn.a,{numberStyle:r,height:28,width:14,color:"",numbers:e.points.toString(),play:!0}))};function vn(){var n=Object(k.a)(["\nmutation ($id: ObjectId, $points: Int!){\n    updateOneCard(\n        query: {_id: $id}\n        set: {points: $points}\n    ) {\n        points\n    }\n}"]);return vn=function(){return n},n}function hn(){var n=Object(k.a)(["\nquery Card($_id: ObjectId!) {\n    card (query:{_id: $_id}) {\n        _id\n        points\n    }\n}"]);return hn=function(){return n},n}var gn=Object(f.gql)(hn()),jn=Object(f.gql)(vn()),On=function(n){var t=n.id,e=Object(f.useMutation)(jn),r=Object(w.a)(e,1)[0],c=function(n){var t=Object(f.useQuery)(n,{skip:!0}).refetch;return function(n){var e=n.variables;return t(e)}}(gn),o=Object(p.e)(on(t)),i=Object(w.a)(o,2),u=i[0],l=i[1],s=function(n){new Promise(function(){var e=Object(v.a)(m.a.mark((function e(r,a){var o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{_id:t}});case 2:o=e.sent,i=o.data.card.points,e.t0=u.vote,e.next=0===e.t0?7:1===e.t0?8:-1===e.t0?9:10;break;case 7:return e.abrupt("return",r(n?{points:i+1,vote:1}:{points:i-1,vote:-1}));case 8:return e.abrupt("return",r(n?{points:i-1,vote:0}:{points:i-2,vote:-1}));case 9:return e.abrupt("return",r(n?{points:i+2,vote:1}:{points:i+1,vote:0}));case 10:return e.abrupt("return",a("Unable to vote"));case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()).then((function(n){var t=n.points,e=n.vote;l(Object(an.a)(Object(an.a)({},u),{},{points:t,vote:e})),r({variables:{id:u.id,points:t}})})).catch(console.error)};return a.a.createElement(rn.Controls,null,a.a.createElement(dn,{onHandleClick:function(){s(1)}}),a.a.createElement(mn,{id:t}),a.a.createElement(pn,{onHandleClick:function(){s(0)}}))},xn=function(n){var t=n.cardData,e=Object(p.e)(on(t._id)),c=Object(w.a)(e,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){i(Object(an.a)(Object(an.a)({},o),{},{id:t._id,url:t.url,points:t.points,vote:0}))}),[]),a.a.createElement(rn.Card,null,a.a.createElement(ln,{url:t.url}),a.a.createElement(On,{id:o.id}))},wn=function(){return a.a.createElement(rn.Header,null,a.a.createElement("img",{id:"desktop",src:"/CatReact/images/cat-react-logo-emoji-DT.png"}),a.a.createElement("img",{id:"mobile",src:"/CatReact/images/cat-react-logo-emoji-mobile.png"}))},kn=function(){return a.a.createElement(rn.Footer,null,a.a.createElement("span",null,"Made with ",a.a.createElement("span",{role:"img","aria-label":"Sparkling Heart"},"\ud83d\udc96")," by "),a.a.createElement("a",{href:"https://thelifeisyours.no/",title:"thelifeisyours.no/"},"TheLifeIsYours"),a.a.createElement("span",null," \xa9 ",(new Date).getFullYear()))},En=e(36);function yn(){var n=Object(k.a)(["\nmutation AddCard($url: String!) {\n\tinsertOneCard(\n\t\tdata: {\n\t\t\turl: $url,\n\t\t\tpoints: 0\n\t\t}\n\t) {\n\t\t_id\n\t\turl\n\t\tpoints\n\t}\n}"]);return yn=function(){return n},n}var Cn=Object(f.gql)(yn()),_n=function(){var n=Object(p.e)(cn),t=Object(w.a)(n,2),e=t[0],r=t[1],c=Object(f.useMutation)(Cn),o=Object(w.a)(c,1)[0],i=function(){var n=Object(v.a)(m.a.mark((function n(){var t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.thecatapi.com/v1/images/search?size=full");case 2:return t=n.sent,n.next=5,t.json();case 5:t=n.sent,o({variables:{url:t[0].url}}).then((function(n){var t=n.data.insertOneCard,c=a.a.createElement(xn,{key:t._id,cardData:t});r([c].concat(Object(En.a)(e)))})).catch(console.error);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return a.a.createElement(rn.FetchCat,null,a.a.createElement(sn,{onHandleClick:i,value:"Fetch Cat"}))};function Hn(){var n=Object(k.a)(["\nquery GetCards {\n\tcards {\n\t\t_id\n\t\turl\n\t\tpoints\n\t}\n}"]);return Hn=function(){return n},n}var Dn=Object(f.gql)(Hn()),qn=new p.b({key:"sortBy",default:{selected:"",options:["highest scoring","newest"]}});var Sn=function(){var n=Object(p.e)(qn),t=Object(w.a)(n,2),e=t[0],r=(t[1],Object(f.useQuery)(Dn)),c=r.loading,o=r.error,i=r.data,u=Object(p.e)(cn),l=Object(w.a)(u,2),s=l[0];return l[1],c?a.a.createElement("div",null,"Loading ..."):o?a.a.createElement("div",null,"Error: ",o.message):a.a.createElement(rn.Wrapper,null,a.a.createElement(wn,null),a.a.createElement(_n,null),a.a.createElement("div",null,s,function(){switch(e.selected){case e.options[0]:return i.cards.map((function(n){return console.log(n),a.a.createElement(xn,{key:n._id,cardData:n})})).sort((function(n,t){console.log(n,t)}));case e.options[1]:default:return i.cards.map((function(n){return console.log(n),a.a.createElement(xn,{key:n._id,cardData:n})})).reverse()}}()),a.a.createElement(kn,null))};e(119),e(120),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(d,null,a.a.createElement(p.a,null,a.a.createElement(f.ApolloProvider,{client:x},a.a.createElement(Sn,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))},95:function(n,t,e){n.exports=e(121)}},[[95,1,2]]]);
//# sourceMappingURL=main.b24ff0c9.chunk.js.map