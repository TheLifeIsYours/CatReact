(this.webpackJsonpcatreact=this.webpackJsonpcatreact||[]).push([[0],{119:function(n,t,e){},120:function(n,t,e){},121:function(n,t,e){"use strict";e.r(t);var r=e(2),a=e.n(r),o=e(45),c=e.n(o),i=e(7),u=e(15),l=e(25),s=e(26),d=function(n){Object(l.a)(e,n);var t=Object(s.a)(e);function e(n){var r;return Object(i.a)(this,e),(r=t.call(this,n)).state={hasError:!1},r}return Object(u.a)(e,[{key:"componentDidCatch",value:function(n,t){}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(n){return{hasError:!0}}}]),e}(a.a.Component),f=e(19),p=e(20),b=e(4),m=e.n(b),v=e(8),h=e(70),g=new h.a("catreact-lkwiu");function j(){return O.apply(this,arguments)}function O(){return(O=Object(v.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(g.currentUser){n.next=5;break}return n.next=3,g.logIn(h.b.anonymous());case 3:n.next=7;break;case 5:return n.next=7,g.currentUser.refreshCustomData();case 7:return n.abrupt("return",g.currentUser.accessToken);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var x=new p.ApolloClient({link:new p.HttpLink({uri:"https://realm.mongodb.com/api/client/v2.0/app/".concat("catreact-lkwiu","/graphql"),fetch:function(n){function t(t,e){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}(function(){var n=Object(v.a)(m.a.mark((function n(t,e){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j();case 2:return r=n.sent,e.headers.Authorization="Bearer ".concat(r),n.abrupt("return",fetch(t,e));case 5:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}),cache:new p.InMemoryCache({typePolicies:{Cards:{keyFields:["_id","url","points"]}}})}),w=e(6),k=e(17),E=e(37),y=e(125),C=e(126),_=e(124),H=e(22);function D(){var n=Object(k.a)(["\n\t\t","\n\t"]);return D=function(){return n},n}function q(){var n=Object(k.a)([""]);return q=function(){return n},n}function S(){var n=Object(k.a)([""]);return S=function(){return n},n}function $(){var n=Object(k.a)(["\n    color: #fff;\n    width: 100vw;\n    height: 100vh;\n    display: flex;\n    flex-flow: column;\n    justify-content: center;\n    align-items: center;\n\n    font-size: 2em;\n\n    & img {\n        width: 15rem;\n        margin: 2rem;\n        animation: rotate infinite forwards linear 2s;\n    }\n\n    @keyframes rotate {\n        from{transform:rotate(0deg)}\n        to{transform:rotate(360deg)}\n    }\n"]);return $=function(){return n},n}function F(){var n=Object(k.a)(["\n    max-width: 10em;\n    overflow: hidden;\n"]);return F=function(){return n},n}function I(){var n=Object(k.a)(["\n    width: 100%;\n    margin: 0 0 20px 0;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 27px;\n    background: #c66df9;\n    color: #ffffff;\n    border-radius: 4px;\n    text-align: center;\n    box-sizing:border-box;\n    \n    :hover {\n        color: #c66df9;\n        background: #ffffff;\n    }\n"]);return I=function(){return n},n}function z(){var n=Object(k.a)(["\n    float: right;\n"]);return z=function(){return n},n}function A(){var n=Object(k.a)(["\n    float: left;\n"]);return A=function(){return n},n}function P(){var n=Object(k.a)(["\n    height:52px;\n    width: 60px;\n    padding: 0;\n"]);return P=function(){return n},n}function M(){var n=Object(k.a)(["\n    cursor: pointer;\n    padding: 15px 20px 15px 20px;\n    margin-top: -12px;\n    background: none;\n    border: none;\n    border-radius: none;\n\n    & img {\n        width: 100%;\n        height: auto;\n        border-radius: none;\n    }\n"]);return M=function(){return n},n}function U(){var n=Object(k.a)(["\n    padding: 15px;\n    display: flex;\n    flex-flow: row;\n    justify-content: space-between;\n"]);return U=function(){return n},n}function B(){var n=Object(k.a)(["\n\tpadding: 15px;\n\tmargin-bottom: 30px;\n\tbackground: #3b3e45;\n\tborder-radius: 4px;\n\tbox-shadow: 0px 3px 7px #202225;\n"]);return B=function(){return n},n}function L(){var n=Object(k.a)(["\n\twidth: 100%\n\theight: auto;\n\ttext-align: center;\n    color: #c66df9;\n    \n    & a {\n        color: white;\n    }\n"]);return L=function(){return n},n}function R(){var n=Object(k.a)(["\n    #mobile {\n        display: none;\n    }\n\n    #desktop {\n        display: block;\n    }\n\n    @media(max-width:680px) {\n        #mobile {\n            display: block;\n        }\n\n        #desktop {\n            display: none;\n        }\n    }\n\n    padding: 10px;\n\n    & img {\n        border:0px;\n        width: 100%;\n        height: auto;\n        margin: 0 0 10px 0;\n        box-sizing: border-box;\n    }\n"]);return R=function(){return n},n}function W(){var n=Object(k.a)(["\n    width: 100%;\n    max-width: 800px;\n    height: auto;\n    margin: 0 auto;\n    background: #2f3136;\n    box-sizing: border-box;\n\n    padding: 30px 50px 30px 50px;\n\n    @media(max-width:680px) {\n\t    padding: 30px 25px 30px 25px;\n    }\n\n    img {\n        border: 0px;\n        width: 100%;\n        height: auto;\n        margin: 0 0 10px 0;\n        padding: 0;\n    }\n"]);return W=function(){return n},n}var T=H.a.main(W()),J=H.a.header(R()),Q=H.a.footer(L()),Y=H.a.div(B()),G=H.a.div(U()),K=H.a.button(M()),N=H.a.button(P()),V=H.a.button(A()),X=H.a.button(z()),Z=H.a.button(I()),nn=H.a.div(F()),tn=H.a.div($()),en=Object(H.a)(H.a.div(q()))(S()),rn=function(n){var t=n.children,e=Object(E.a)(n,["children"]);return a.a.createElement(en,e,t)},an=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];var r=Object(y.a)(C.a,Object(_.a)("rules"),Object(_.a)("componentStyle"))(t);return H.a.div(D(),r)};rn.Wrapper=T,rn.Header=J,rn.Footer=Q,rn.Card=Y,rn.Controls=G,rn.Button=K,rn.FetchCat=an(K,Z),rn.Upvote=an(K,N,V),rn.Downvote=an(K,N,X),rn.Points=nn,rn.Loading=tn;var on=rn,cn=e(5),un=Object(f.b)({key:"cards",default:[]}),ln=Object(f.c)({key:"card",default:{id:"",url:"",points:0,vote:0}}),sn=Object(f.b)({key:"selectedCardId",default:null}),dn=(Object(f.d)({key:"selectedCard",get:function(n){var t=n.get,e=t(sn);if(null!=e)return t(ln(e))},set:function(n,t){var e=n.set,r=(0,n.get)(sn);null!=r&&e(ln(r),t)}}),function(n){var t=n.url;return a.a.createElement("img",{src:t,alt:""})}),fn=function(n){return a.a.createElement("div",{onClick:function(){n.onHandleClick()}},n.value)},pn=function(n){Object(l.a)(e,n);var t=Object(s.a)(e);function e(){var n;Object(i.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=t.call.apply(t,[this].concat(a))).state={active:!1,icon:""},n}return Object(u.a)(e,[{key:"render",value:function(){return a.a.createElement(on.Upvote,null,a.a.createElement(fn,{onHandleClick:this.props.onHandleClick,value:a.a.createElement("img",{src:"".concat("/CatReact","/images/upvote-claw.png"),alt:""})}))}}]),e}(r.Component),bn=function(n){return a.a.createElement(on.Downvote,null,a.a.createElement(fn,{onHandleClick:n.onHandleClick,value:a.a.createElement("img",{src:"".concat("/CatReact","/images/downvote-claw.png"),alt:""})}))},mn=e(94),vn=e.n(mn),hn=function(n){var t=n.id,e=Object(f.f)(ln(t)),r={color:["#f10033","#fff","#28c120"][e.vote+1]};return a.a.createElement(on.Points,null,a.a.createElement(vn.a,{numberStyle:r,height:28,width:14,color:"",numbers:e.points.toString(),play:!0}))};function gn(){var n=Object(k.a)(["\nmutation ($id: ObjectId, $points: Int!){\n    updateOneCard(\n        query: {_id: $id}\n        set: {points: $points}\n    ) {\n        points\n    }\n}"]);return gn=function(){return n},n}function jn(){var n=Object(k.a)(["\nquery Card($_id: ObjectId!) {\n    card (query:{_id: $_id}) {\n        _id\n        points\n    }\n}"]);return jn=function(){return n},n}var On=Object(p.gql)(jn()),xn=Object(p.gql)(gn()),wn=function(n){var t=n.id,e=Object(p.useMutation)(xn),r=Object(w.a)(e,1)[0],o=function(n){var t=Object(p.useQuery)(n,{skip:!0}).refetch;return function(n){var e=n.variables;return t(e)}}(On),c=Object(f.e)(ln(t)),i=Object(w.a)(c,2),u=i[0],l=i[1],s=function(n){new Promise(function(){var e=Object(v.a)(m.a.mark((function e(r,a){var c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({variables:{_id:t}});case 2:c=e.sent,i=c.data.card.points,e.t0=u.vote,e.next=0===e.t0?7:1===e.t0?8:-1===e.t0?9:10;break;case 7:return e.abrupt("return",r(n?{points:i+1,vote:1}:{points:i-1,vote:-1}));case 8:return e.abrupt("return",r(n?{points:i-1,vote:0}:{points:i-2,vote:-1}));case 9:return e.abrupt("return",r(n?{points:i+2,vote:1}:{points:i+1,vote:0}));case 10:return e.abrupt("return",a("Unable to vote"));case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()).then((function(n){var t=n.points,e=n.vote;l(Object(cn.a)(Object(cn.a)({},u),{},{points:t,vote:e})),r({variables:{id:u.id,points:t}})})).catch(console.error)};return a.a.createElement(on.Controls,null,a.a.createElement(pn,{onHandleClick:function(){s(1)}}),a.a.createElement(hn,{id:t}),a.a.createElement(bn,{onHandleClick:function(){s(0)}}))},kn=function(n){var t=n.cardData,e=Object(f.e)(ln(t._id)),o=Object(w.a)(e,2),c=o[0],i=o[1];return Object(r.useEffect)((function(){i(Object(cn.a)(Object(cn.a)({},c),{},{id:t._id,url:t.url,points:t.points,vote:0}))}),[]),a.a.createElement(on.Card,null,a.a.createElement(dn,{url:t.url}),a.a.createElement(wn,{id:c.id}))},En=function(){return a.a.createElement(on.Header,null,a.a.createElement("img",{id:"desktop",src:"/CatReact/images/cat-react-logo-emoji-DT.png"}),a.a.createElement("img",{id:"mobile",src:"/CatReact/images/cat-react-logo-emoji-mobile.png"}))},yn=function(){return a.a.createElement(on.Footer,null,a.a.createElement("span",null,"Made with ",a.a.createElement("span",{role:"img","aria-label":"Sparkling Heart"},"\ud83d\udc96")," by "),a.a.createElement("a",{href:"https://thelifeisyours.no/",title:"thelifeisyours.no/"},"TheLifeIsYours"),a.a.createElement("span",null," \xa9 ",(new Date).getFullYear()))},Cn=function(){return a.a.createElement(on.Loading,null,a.a.createElement("img",{src:"".concat("/CatReact","/images/emoticon-cat.png"),alt:""}),"Loading ...")},_n=e(36);function Hn(){var n=Object(k.a)(["\nmutation AddCard($url: String!) {\n\tinsertOneCard(\n\t\tdata: {\n\t\t\turl: $url,\n\t\t\tpoints: 0\n\t\t}\n\t) {\n\t\t_id\n\t\turl\n\t\tpoints\n\t}\n}"]);return Hn=function(){return n},n}var Dn=Object(p.gql)(Hn()),qn=["Fetch Cat","Pspspsps","Put out a bowl of milk"],Sn=function(){var n=Object(f.e)(un),t=Object(w.a)(n,2),e=t[0],r=t[1],o=Object(p.useMutation)(Dn),c=Object(w.a)(o,1)[0],i=function(){var n=Object(v.a)(m.a.mark((function n(){var t;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.thecatapi.com/v1/images/search?size=full");case 2:return t=n.sent,n.next=5,t.json();case 5:t=n.sent,c({variables:{url:t[0].url}}).then((function(n){var t=n.data.insertOneCard,o=a.a.createElement(kn,{key:t._id,cardData:t});r([o].concat(Object(_n.a)(e)))})).catch(console.error);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return a.a.createElement(on.FetchCat,null,a.a.createElement(fn,{onHandleClick:i,value:qn[Math.floor(Math.random()*qn.length)]}))};function $n(){var n=Object(k.a)(["\nquery GetCards {\n\tcards {\n\t\t_id\n\t\turl\n\t\tpoints\n\t}\n}"]);return $n=function(){return n},n}var Fn=Object(p.gql)($n()),In=new f.b({key:"sortBy",default:{selected:"",options:["highest scoring","newest"]}});var zn=function(){var n=Object(f.e)(In),t=Object(w.a)(n,2),e=t[0],r=(t[1],Object(p.useQuery)(Fn)),o=r.loading,c=r.error,i=r.data,u=Object(f.e)(un),l=Object(w.a)(u,2),s=l[0];return l[1],o?a.a.createElement(Cn,null):c?a.a.createElement("div",null,"Error: ",c.message):a.a.createElement(on.Wrapper,null,a.a.createElement(En,null),a.a.createElement(Sn,null),a.a.createElement("div",null,s,function(){switch(e.selected){case e.options[0]:return i.cards.map((function(n){return console.log(n),a.a.createElement(kn,{key:n._id,cardData:n})})).sort((function(n,t){console.log(n,t)}));case e.options[1]:default:return i.cards.map((function(n){return console.log(n),a.a.createElement(kn,{key:n._id,cardData:n})})).reverse()}}()),a.a.createElement(yn,null))};e(119),e(120),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(d,null,a.a.createElement(f.a,null,a.a.createElement(p.ApolloProvider,{client:x},a.a.createElement(zn,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))},95:function(n,t,e){n.exports=e(121)}},[[95,1,2]]]);
//# sourceMappingURL=main.5406f4b0.chunk.js.map