(this.webpackJsonpcatreact=this.webpackJsonpcatreact||[]).push([[0],{119:function(n,e,t){},120:function(n,e,t){},121:function(n,e,t){"use strict";t.r(e);var r=t(1),a=t.n(r),c=t(45),o=t.n(c),i=t(7),u=t(15),l=t(24),s=t(25),d=function(n){Object(l.a)(t,n);var e=Object(s.a)(t);function t(n){var r;return Object(i.a)(this,t),(r=e.call(this,n)).state={hasError:!1},r}return Object(u.a)(t,[{key:"componentDidCatch",value:function(n,e){}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(n){return{hasError:!0}}}]),t}(a.a.Component),p=t(19),f=t(20),b=t(4),m=t.n(b),v=t(8),h=t(70),g=new h.a("catreact-lkwiu");function j(){return O.apply(this,arguments)}function O(){return(O=Object(v.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(g.currentUser){n.next=5;break}return n.next=3,g.logIn(h.b.anonymous());case 3:n.next=7;break;case 5:return n.next=7,g.currentUser.refreshCustomData();case 7:return n.abrupt("return",g.currentUser.accessToken);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var x=new f.ApolloClient({link:new f.HttpLink({uri:"https://realm.mongodb.com/api/client/v2.0/app/".concat("catreact-lkwiu","/graphql"),fetch:function(n){function e(e,t){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(){var n=Object(v.a)(m.a.mark((function n(e,t){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j();case 2:return r=n.sent,t.headers.Authorization="Bearer ".concat(r),n.abrupt("return",fetch(e,t));case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}),cache:new f.InMemoryCache({typePolicies:{Cards:{keyFields:["_id","url","points"]}}})}),E=t(6),w=t(18),k=t(37),y=t(125),C=t(126),H=t(124),_=t(26);function D(){var n=Object(w.a)(["\n\t\t","\n\t"]);return D=function(){return n},n}function S(){var n=Object(w.a)([""]);return S=function(){return n},n}function q(){var n=Object(w.a)([""]);return q=function(){return n},n}function $(){var n=Object(w.a)(["\n    max-width: 10em;\n    overflow: hidden;\n"]);return $=function(){return n},n}function F(){var n=Object(w.a)(["\n    width: 100%;\n    margin: 0 0 20px 0;\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 27px;\n    background: #c66df9;\n    color: #ffffff;\n    border-radius: 4px;\n    text-align: center;\n    box-sizing:border-box;\n    \n    :hover {\n        color: #c66df9;\n        background: #ffffff;\n    }\n"]);return F=function(){return n},n}function I(){var n=Object(w.a)(["\n    float: right;\n"]);return I=function(){return n},n}function A(){var n=Object(w.a)(["\n    float: left;\n"]);return A=function(){return n},n}function U(){var n=Object(w.a)(["\n    height:52px;\n    width: 60px;\n    padding: 0;\n"]);return U=function(){return n},n}function z(){var n=Object(w.a)(["\n    cursor: pointer;\n    padding: 15px 20px 15px 20px;\n    margin-top: -12px;\n    background: none;\n    border: none;\n    border-radius: none;\n\n    & img {\n        width: 100%;\n        height: auto;\n        border-radius: none;\n    }\n"]);return z=function(){return n},n}function B(){var n=Object(w.a)(["\n    padding: 15px;\n    display: flex;\n    flex-flow: row;\n    justify-content: space-between;\n"]);return B=function(){return n},n}function P(){var n=Object(w.a)(["\n\tpadding: 15px;\n\tmargin-bottom: 30px;\n\tbackground: #3b3e45;\n\tborder-radius: 4px;\n\tbox-shadow: 0px 3px 7px #202225;\n"]);return P=function(){return n},n}function M(){var n=Object(w.a)(["\n\twidth: 100%\n\theight: auto;\n\ttext-align: center;\n    color: #c66df9;\n    \n    & a {\n        color: white;\n    }\n"]);return M=function(){return n},n}function R(){var n=Object(w.a)(["\n    #mobile {\n        display: none;\n    }\n\n    #desktop {\n        display: block;\n    }\n\n    @media(max-width:680px) {\n        #mobile {\n            display: block;\n        }\n\n        #desktop {\n            display: none;\n        }\n    }\n\n    padding: 10px;\n\n    & img {\n        border:0px;\n        width: 100%;\n        height: auto;\n        margin: 0 0 10px 0;\n        box-sizing: border-box;\n    }\n"]);return R=function(){return n},n}function W(){var n=Object(w.a)(["\n    width: 100%;\n    max-width: 800px;\n    height: auto;\n    margin: 0 auto;\n    background: #2f3136;\n    box-sizing: border-box;\n\n    padding: 30px 50px 30px 50px;\n\n    @media(max-width:680px;) {\n\t    padding: 30px 25px 30px 25px;\n    }\n\n    img {\n        border: 0px;\n        width: 100%;\n        height: auto;\n        margin: 0 0 10px 0;\n        padding: 0;\n    }\n"]);return W=function(){return n},n}var L=_.a.main(W()),T=_.a.header(R()),J=_.a.footer(M()),Q=_.a.div(P()),Y=_.a.div(B()),G=_.a.button(z()),K=_.a.button(U()),N=_.a.button(A()),V=_.a.button(I()),X=_.a.button(F()),Z=_.a.div($()),nn=Object(_.a)(_.a.div(S()))(q()),en=function(n){var e=n.children,t=Object(k.a)(n,["children"]);return a.a.createElement(nn,t,e)},tn=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r=Object(y.a)(C.a,Object(H.a)("rules"),Object(H.a)("componentStyle"))(e);return _.a.div(D(),r)};en.Wrapper=L,en.Header=T,en.Footer=J,en.Card=Q,en.Controls=Y,en.Button=G,en.FetchCat=tn(G,X),en.Upvote=tn(G,K,N),en.Downvote=tn(G,K,V),en.Points=Z;var rn=en,an=t(5),cn=Object(p.b)({key:"cards",default:[]}),on=Object(p.c)({key:"card",default:{id:"",url:"",points:0,vote:0}}),un=Object(p.b)({key:"selectedCardId",default:null}),ln=(Object(p.d)({key:"selectedCard",get:function(n){var e=n.get,t=e(un);if(null!=t)return e(on(t))},set:function(n,e){var t=n.set,r=(0,n.get)(un);null!=r&&t(on(r),e)}}),function(n){var e=n.url;return a.a.createElement("img",{src:e,alt:""})}),sn=function(n){return a.a.createElement("div",{onClick:function(){n.onHandleClick()}},n.value)},dn=function(n){Object(l.a)(t,n);var e=Object(s.a)(t);function t(){var n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=e.call.apply(e,[this].concat(a))).state={active:!1,icon:""},n}return Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement(rn.Upvote,null,a.a.createElement(sn,{onHandleClick:this.props.onHandleClick,value:a.a.createElement("img",{src:"".concat("/CatReact","/images/upvote-claw.png"),alt:""})}))}}]),t}(r.Component),pn=function(n){return a.a.createElement(rn.Downvote,null,a.a.createElement(sn,{onHandleClick:n.onHandleClick,value:a.a.createElement("img",{src:"".concat("/CatReact","/images/downvote-claw.png"),alt:""})}))},fn=t(94),bn=t.n(fn),mn=function(n){var e=n.id,t=Object(p.f)(on(e)),r={color:["#f10033","#fff","#28c120"][t.vote+1]};return a.a.createElement(rn.Points,null,a.a.createElement(bn.a,{numberStyle:r,height:28,width:14,color:"",numbers:t.points.toString(),play:!0}))};function vn(){var n=Object(w.a)(["\nmutation ($id: ObjectId, $points: Int!){\n    updateOneCard(\n        query: {_id: $id}\n        set: {points: $points}\n    ) {\n        points\n    }\n}"]);return vn=function(){return n},n}function hn(){var n=Object(w.a)(["\nquery Card($_id: ObjectId!) {\n    card (query:{_id: $_id}) {\n        _id\n        points\n    }\n}"]);return hn=function(){return n},n}var gn=Object(f.gql)(hn()),jn=Object(f.gql)(vn()),On=function(n){var e=n.id,t=Object(f.useMutation)(jn),r=Object(E.a)(t,1)[0],c=function(n){var e=Object(f.useQuery)(n,{skip:!0}).refetch;return function(n){var t=n.variables;return e(t)}}(gn),o=Object(p.e)(on(e)),i=Object(E.a)(o,2),u=i[0],l=i[1],s=function(n){new Promise(function(){var t=Object(v.a)(m.a.mark((function t(r,a){var o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c({variables:{_id:e}});case 2:o=t.sent,i=o.data.card.points,t.t0=u.vote,t.next=0===t.t0?7:1===t.t0?8:-1===t.t0?9:10;break;case 7:return t.abrupt("return",r(n?{points:i+1,vote:1}:{points:i-1,vote:-1}));case 8:return t.abrupt("return",r(n?{points:i-1,vote:0}:{points:i-2,vote:-1}));case 9:return t.abrupt("return",r(n?{points:i+2,vote:1}:{points:i+1,vote:0}));case 10:return t.abrupt("return",a("Unable to vote"));case 11:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()).then((function(n){var e=n.points,t=n.vote;l(Object(an.a)(Object(an.a)({},u),{},{points:e,vote:t})),r({variables:{id:u.id,points:e}})})).catch(console.error)};return a.a.createElement(rn.Controls,null,a.a.createElement(dn,{onHandleClick:function(){s(1)}}),a.a.createElement(mn,{id:e}),a.a.createElement(pn,{onHandleClick:function(){s(0)}}))},xn=function(n){var e=n.cardData,t=Object(p.e)(on(e._id)),c=Object(E.a)(t,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){i(Object(an.a)(Object(an.a)({},o),{},{id:e._id,url:e.url,points:e.points,vote:0}))}),[]),a.a.createElement(rn.Card,null,a.a.createElement(ln,{url:e.url}),a.a.createElement(On,{id:o.id}))},En=function(){return a.a.createElement(rn.Header,null,a.a.createElement("img",{id:"desktop",src:"/CatReact/images/cat-react-logo-emoji-DT.png"}),a.a.createElement("img",{id:"mobile",src:"/CatReact/images/cat-react-logo-emoji-mobile.png"}))},wn=function(){return a.a.createElement(rn.Footer,null,a.a.createElement("span",null,"Made with ",a.a.createElement("span",{role:"img","aria-label":"Sparkling Heart"},"\ud83d\udc96")," by "),a.a.createElement("a",{href:"https://thelifeisyours.no/",title:"thelifeisyours.no/"},"TheLifeIsYours"),a.a.createElement("span",null," \xa9 ",(new Date).getFullYear()))},kn=function(n){return a.a.createElement("select",null,n.options.map((function(e,t){return a.a.createElement("option",{key:e,value:e,onChange:function(){n.onHandleChange()}},e[0].toUpperCase()+e.slice(1))})))},yn=t(36);function Cn(){var n=Object(w.a)(["\nmutation AddCard($url: String!) {\n\tinsertOneCard(\n\t\tdata: {\n\t\t\turl: $url,\n\t\t\tpoints: 0\n\t\t}\n\t) {\n\t\t_id\n\t\turl\n\t\tpoints\n\t}\n}"]);return Cn=function(){return n},n}var Hn=Object(f.gql)(Cn()),_n=function(){var n=Object(p.e)(cn),e=Object(E.a)(n,2),t=e[0],r=e[1],c=Object(f.useMutation)(Hn),o=Object(E.a)(c,1)[0],i=function(){var n=Object(v.a)(m.a.mark((function n(){var e;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.thecatapi.com/v1/images/search?size=full");case 2:return e=n.sent,n.next=5,e.json();case 5:e=n.sent,o({variables:{url:e[0].url}}).then((function(n){var e=n.data.insertOneCard,c=a.a.createElement(xn,{key:e._id,cardData:e});r([c].concat(Object(yn.a)(t)))})).catch(console.error);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return a.a.createElement(rn.FetchCat,null,a.a.createElement(sn,{onHandleClick:i,value:"Fetch Cat"}))};function Dn(){var n=Object(w.a)(["\nquery GetCards {\n\tcards {\n\t\t_id\n\t\turl\n\t\tpoints\n\t}\n}"]);return Dn=function(){return n},n}var Sn=Object(f.gql)(Dn()),qn=new p.b({key:"sortBy",default:{selected:"",options:["highest scoring","newest"]}});var $n=function(){var n=Object(p.e)(qn),e=Object(E.a)(n,2),t=e[0],r=(e[1],Object(f.useQuery)(Sn)),c=r.loading,o=r.error,i=r.data,u=Object(p.e)(cn),l=Object(E.a)(u,2),s=l[0];return l[1],c?a.a.createElement("div",null,"Loading ..."):o?a.a.createElement("div",null,"Error: ",o.message):a.a.createElement(rn.Wrapper,null,a.a.createElement(En,null),a.a.createElement(_n,null),a.a.createElement("div",null,a.a.createElement("span",null,"Sort by "),a.a.createElement(kn,{value:t.selected,onHandleChange:function(n){console.log(n)},options:t.options})),a.a.createElement("h1",null,"Ordered by ",t.selected),a.a.createElement("div",null,s,function(){switch(t.selected){case t.options[0]:return i.cards.map((function(n){return console.log(n),a.a.createElement(xn,{key:n._id,cardData:n})})).sort((function(n,e){console.log(n,e)}));case t.options[1]:default:return i.cards.map((function(n){return console.log(n),a.a.createElement(xn,{key:n._id,cardData:n})})).reverse()}}()),a.a.createElement(wn,null))};t(119),t(120),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(d,null,a.a.createElement(p.a,null,a.a.createElement(f.ApolloProvider,{client:x},a.a.createElement($n,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))},95:function(n,e,t){n.exports=t(121)}},[[95,1,2]]]);
//# sourceMappingURL=main.46d32bc3.chunk.js.map